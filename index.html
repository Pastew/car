<!doctype html>
<html>

<head>
    <title>Car</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
</head>

<body>

    <div class="row">


        <!-- left panel -->
        <div class="col-md-2">
            <button class="btn btn-danger btn-block btn-lg" id="led">LED</button>
            <br/>
            <button class="btn btn-primary btn-block btn-lg" id="forward">forward</button>
            <br/>
            <button class="btn btn-primary btn-block btn-lg" id="backward">backward</button>

            <br/>
            <br/>
            <!-- both motors speed -->
            <div class="row">
                <button class="col-md-5 btn btn-success" id="both-speed-minus">-</button>
                <button class="col-md-5 btn btn-success" id="both-speed-plus">+</button>
            </div>
        </div>

        <!-- video -->
        <div class="col-md-7">
            <img alt="http://192.168.0.18:8080/?action=stream" src="http://192.168.0.18:8080/?action=stream" height="417" width="556">
            <br/>
            <button class="btn btn-info center-block btn-sm" id="stream">stream</button>
        </div>

        <!-- right panel -->
        <div class="col-md-3">
            <div class="row">
                <div class="col-md-6">
                    <button class="btn btn-primary btn-block btn-lg pull-right" id="left">left</button>
                </div>
                <div class="col-md-6">
                    <button class="btn btn-primary btn-block btn-lg pull-right" id="right">right</button>
                </div>
            </div>

            <br/>
            <br/>
            <br/>
            <!-- left-right motors speed -->
            <div class="row">
                <div class="col-md-6">
                    <button class="btn-block btn btn-success btn-lg" id="left-speed-plus">+</button>
                    <br/>
                    <span class="" id="left-speed">100</span>
                    <br/>
                    <button class="btn-block btn btn-success btn-lg" id="left-speed-minus">-</button>
                </div>
                <div class="col-md-6">
                    <button class="btn-block btn btn-success btn-lg" id="right-speed-plus">+</button>
                    <br/>
                    <span class="" id="right-speed">100</span>
                    <br/>
                    <button class="btn-block btn btn-success btn-lg" id="right-speed-minus">-</button>
                </div>
            </div>

        </div>

        <script src="/socket.io/socket.io.js"></script>
        <script src="js/jquery-1.11.2.js"></script>
        <script>
            var socket = io();

            function emit(message) {
                socket.emit('action', message);
                return false;
            }

            $('#led').mousedown(function () {
                socket.emit('action', 'ledOn');
                return false;
            });
            $('#led').mouseup(function () {
                socket.emit('action', 'ledOff');
                return false;
            });

            $('#forward').mousedown(function () {
                socket.emit('action', 'forward');
                return false;
            });

            $('#backward').mousedown(function () {
                socket.emit('action', 'backward');
                return false;
            });

            $('#left').mousedown(function () {
                socket.emit('action', 'left');
                return false;
            });

            $('#right').mousedown(function () {
                socket.emit('action', 'right');
                return false;
            });

            $('#stream').click(function () {
                socket.emit('action', 'stream');
                return false;
            });

            $('#forward, #backward, #left, #right').mouseup(function () {
                socket.emit('action', 'stop');
                return false;
            });



            $('#both-speed-plus').click(function () {
                socket.emit('action', 'both_speed_plus');
                return false;
            });

            $('#both-speed-minus').click(function () {
                socket.emit('action', 'both_speed_minus');
                return false;
            });

            $('#left-speed-minus').click(function () {
                socket.emit('action', 'left_speed_minus');
                return false;
            });

            $('#left-speed-plus').click(function () {
                socket.emit('action', 'left_speed_plus');
                return false;
            });

            $('#right-speed-minus').click(function () {
                socket.emit('action', 'right_speed_minus');
                return false;
            });

            $('#right-speed-plus').click(function () {
                socket.emit('action', 'right_speed_plus');
                return false;
            });

            $(document).ready(function () {
                $(this).keydown(function (e) {
                    e.preventDefault();
                    switch (e.keyCode) {
                    case 87:
                        emit('forward');
                        break;
                    case 83:
                        emit('backward');
                        break;
                    case 65:
                        emit('left');
                        break;
                    case 68:
                        emit('right');
                        break;
                    }
                });

                $(this).keyup(function (e) {
                    e.preventDefault();
                    emit('stop');
                });
            });
        </script>
</body>

</html>